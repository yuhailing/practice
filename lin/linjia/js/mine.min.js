$(document).ready(function() {
    setCode();
    getUser();
    isc("car-wrapper");
    hidShopCar();
    getCarNum();
    clearInfor()
});
function code11(_obj, _val) {
    _obj.empty().barcode(_val, "code128", {
        barWidth: 2,
        barHeight: 65,
        showHRI: false
    })
}
function setCode() {
    touch.on($(".mine_barcode"), "tap", function() {
        if (localStorage.getItem("phone")) {
            $(".code_line").height($("body").height() * 0.06).removeClass("hid");
            code11($("#mcTarget"), localStorage.getItem("phone"));
            $(".code_alerts").removeClass("hid");
            $(".code").removeClass("hid");
            $(".code_alert").removeClass("hid");
            touch.on($(".close_btn"), "tap", function() {
                setTimeout(function() {
                    $(".code_line").addClass("hid");
                    $(".code").addClass("hid");
                    $(".code_alert").addClass("hid");
                    setTimeout(function() {
                        $(".code_alerts").addClass("hid")
                    }, 800)
                }, 300)
            })
        } else {
            $(".code_para").removeClass("hid")
        }
    })
}
function getUser() {
    if (localStorage.getItem("userId")) {
        userInfor(localStorage.getItem("userId"), sessionStorage.getItem("mall"))
    } else {
        window.location.href = "login.html"
    }
}
function userInfor(_id, _md) {
    sAjax("my/getMyPageInfo", "get", {
        userId: _id,
        mallCode: _md
    }, function getInfor(data) {
        if (data["status"] == "ok") {
            $(".infor-restore b").text(data["resultData"]["balance"]);
            $(".infor-card").text(data["resultData"]["cardCouponCount"]);
            $(".infor-score").text(data["resultData"]["score"])
        }
    })
}
function clearInfor() {
    removeItem("orderCou1", "orderCou1");
    removeItem("orderCou2", "orderCou2");
    removeItem("orderLoc", "orderLoc");
    removeItem("odpl1", "odpl1");
    removeItem("odpl2", "odpl2");
    removeItem("orderCouArr2", "orderCouArr2");
    removeItem("orderCouArr1", "orderCouArr1");
    removeItem("orderCouArr", "orderCouArr");
    semoveItem("orderCou1", "orderCou1");
    semoveItem("orderCou2", "orderCou2");
    semoveItem("orderLoc", "orderLoc");
    semoveItem("odpl1", "odpl1");
    semoveItem("odpl2", "odpl2");
    semoveItem("orderCouArr2", "orderCouArr2");
    semoveItem("orderCouArr1", "orderCouArr1");
    semoveItem("orderCouArr", "orderCouArr")
}